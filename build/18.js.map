{"version":3,"sources":["../../src/pages/management/edit-complaint/edit-complaint.module.ts","../../src/pages/management/edit-complaint/edit-complaint.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAyC;AACO;AACK;AAWrD;IAAA;IAAmC,CAAC;IAAvB,mBAAmB;QAT/B,+DAAQ,CAAC;YACR,YAAY,EAAE,CAAC,0EAAiB,CAAC;YAEjC,OAAO,EAAE;gBACL,sEAAe,CAAC,QAAQ,CAAC,0EAAiB,CAAC;aAC5C;YACH,OAAO,EAAE,CAAC,0EAAiB,CAAC;SAC7B,CAAC;OAEW,mBAAmB,CAAI;IAAD,0BAAC;CAAA;AAAJ;;;;;;;;;;;;;;;;;;;;;;;ACZU;AACgE;AAClC;AACN;AAWlE;IAcI,2BAEY,gBAAkC,EAClC,aAA4B,EAC5B,QAAmB,EACnB,QAAwB,EACxB,eAAsC,EACtC,OAAwB,EACxB,MAAc;QANd,qBAAgB,GAAhB,gBAAgB,CAAkB;QAClC,kBAAa,GAAb,aAAa,CAAe;QAC5B,aAAQ,GAAR,QAAQ,CAAW;QACnB,aAAQ,GAAR,QAAQ,CAAgB;QACxB,oBAAe,GAAf,eAAe,CAAuB;QACtC,YAAO,GAAP,OAAO,CAAiB;QACxB,WAAM,GAAN,MAAM,CAAQ;QApB1B,UAAK,GAAW,UAAQ,IAAI,CAAC,gBAAgB,CAAC,UAAY,CAAC;QAuBvD,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;IACpD,CAAC;IAED,oCAAQ,GAAR;QAAA,iBAYC;QAVG,IAAI,CAAC,aAAa,CAAC,UAAU,EAAE,CAAC;QAChC,IAAI,CAAC,gBAAgB,CAAC,yBAAyB,EAAE;aAC5C,SAAS,CAAC,UAAC,GAAe;YACvB,KAAI,CAAC,aAAa,CAAC,UAAU,EAAE,CAAC;YAE/B,2BAAiB,EAAE,0BAAgB,CAAQ;QAChD,CAAC,EAAE,UAAC,GAAQ;YACR,KAAI,CAAC,aAAa,CAAC,UAAU,EAAE,CAAC;YAChC,KAAI,CAAC,aAAa,CAAC,SAAS,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QAC1C,CAAC,CAAC,CAAC;IACX,CAAC;IAED,2CAAe,GAAf;QAAA,iBAkBC;QAhBG,IAAI,cAA0B,CAAC;QAC/B,EAAE,CAAC,CAAC,SAAS,KAAK,IAAI,CAAC,CAAC,CAAC;YACrB,cAAc,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,OAAO,KAAK,KAAI,CAAC,SAAS,CAAC,OAAO,EAApC,CAAoC,CAAC,CAAC;QACxF,CAAC;QAAC,IAAI,CAAC,CAAC;YACJ,cAAc,GAAG,IAAI,CAAC,WAAW,CAAC;QACtC,CAAC;QAED,IAAI,UAAU,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,mBAAmB,EAAE,EAAE,YAAY,EAAE,cAAc,EAAE,OAAO,EAAE,UAAU,EAAE,CAAC,CAAC;QACjH,UAAU,CAAC,OAAO,EAAE,CAAC;QACrB,UAAU,CAAC,YAAY,CAAC,UAAC,QAAQ;YAC7B,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;gBAEX,KAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC,cAAc,CAAC;gBACxC,KAAI,CAAC,YAAY,GAAG,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC;YACrD,CAAC;QACL,CAAC,CAAC,CAAC;IACP,CAAC;IAGD,qCAAS,GAAT;QAAA,iBAoBC;QAlBG,IAAI,WAAW,GAAG,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;YAC1C,KAAK,EAAE,qCAAqC;YAC5C,OAAO,EAAE;gBACL;oBACI,IAAI,EAAE,KAAK;oBACX,OAAO,EAAE;wBACL,KAAI,CAAC,aAAa,EAAE,CAAC;oBACzB,CAAC;iBACJ,EAAE;oBACC,IAAI,EAAE,QAAQ;oBACd,IAAI,EAAE,aAAa;oBACnB,OAAO,EAAE;oBACT,CAAC;iBACJ;aACJ;SACJ,CAAC,CAAC;QAEH,WAAW,CAAC,OAAO,EAAE,CAAC;IAC1B,CAAC;IAED,yCAAa,GAAb;QAAA,iBAwBC;QAtBG,IAAI,MAAM,GAAQ;YACd,UAAU,EAAE,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,EAAE;YAC7C,QAAQ,EAAE,IAAI,CAAC,QAAQ;SAC1B,CAAC;QACF,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAElB,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;YAAC,MAAM,CAAC,QAAQ,GAAG,CAAC,CAAC;QAAC,CAAC;QAE7C,IAAI,CAAC,aAAa,CAAC,UAAU,EAAE,CAAC;QAChC,IAAI,CAAC,gBAAgB,CAAC,aAAa,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,EAAE,MAAM,CAAC;aACzD,SAAS,CAAC,UAAC,GAAQ;YAEhB,KAAI,CAAC,gBAAgB,CAAC,eAAe,CAAC,KAAI,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;YAC3D,KAAI,CAAC,aAAa,CAAC,UAAU,EAAE,CAAC;YAChC,KAAI,CAAC,aAAa,CAAC,SAAS,CAAC,+BAA+B,CAAC,CAAC;YAC9D,KAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;QACtB,CAAC,EAAE,UAAC,GAAQ;YAER,KAAI,CAAC,aAAa,CAAC,UAAU,EAAE,CAAC;YAChC,KAAI,CAAC,aAAa,CAAC,SAAS,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QAC1C,CAAC,CAAC,CAAC;IAEX,CAAC;IAED,mCAAO,GAAP,UAAQ,gBAAsB;QAE1B,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC;IAC5C,CAAC;IAlHQ,iBAAiB;QAP7B,gEAAS,CAAC;YACP,QAAQ,EAAE,gBAAgB;YAC1B,WAAW,CAAyB;WACxB;SAEf,CAAC;6FAkBgD;YACnB,iEAAa;YAClB,qEAAS;YACT,4EAAc;YACP,uEAAqB;YAC7B,+DAAe;YAChB,MAAM;OAtBjB,iBAAiB,CAmH7B;IAAD,CAAC;AAAA;SAnHY,iBAAiB,gB","file":"18.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ComplaintEditPage } from './edit-complaint';\n\n@NgModule({\n  declarations: [ComplaintEditPage],\n  \n  imports: [\n      IonicPageModule.forChild(ComplaintEditPage)\n    ],\n  exports: [ComplaintEditPage]\n})\n\nexport class ComplaintEditModule { }\n\n\n// WEBPACK FOOTER //\n// ./src/pages/management/edit-complaint/edit-complaint.module.ts","\nimport { Component } from '@angular/core';\nimport { IonicPage, Events, NavParams, ViewController, ModalController, ActionSheetController } from 'ionic-angular';\nimport { ComplaintService } from '../../../providers/complaint.service';\nimport { CustomService } from '../../../providers/custom.service';\ndeclare var URLPREFIX;\n\n@IonicPage()\n@Component({\n    selector: 'edit-complaint',\n    templateUrl: './edit-complaint.html',\n    styles: [``]\n\n})\n\nexport class ComplaintEditPage {\n\n    title: string = `Edit ${this.complaintService.compOrSugg}`;\n    complaint: any;\n\n    //form variables\n    assignTo: any;\n    assignToName: string;\n    priority: string;\n    priorityList: Array<any>;\n    inProgress: boolean;\n    facultyList: Array<any>;\n\n    searchList: Array<any>;\n    constructor(\n\n        private complaintService: ComplaintService,\n        private customService: CustomService,\n        private navParam: NavParams,\n        private viewCtrl: ViewController,\n        private actionSheetCtrl: ActionSheetController,\n        private mdlCtrl: ModalController,\n        private events: Events\n    ) {\n\n        this.complaint = this.navParam.get('complaint');\n    }\n\n    ngOnInit() {\n\n        this.customService.showLoader();\n        this.complaintService.getPrioritiesAndEmployees()\n            .subscribe((res: Array<any>) => {\n                this.customService.hideLoader();\n\n                [this.priorityList, this.facultyList] = res;\n            }, (err: any) => {\n                this.customService.hideLoader();\n                this.customService.showToast(err.msg);\n            });\n    }\n\n    onAssignedToBtn() {\n\n        let searchableList: Array<any>;\n        if (URLPREFIX === 'sa') {\n            searchableList = this.facultyList.filter(s => s.storeId === this.complaint.storeId);\n        } else {\n            searchableList = this.facultyList;\n        }\n\n        let searchPage = this.mdlCtrl.create(\"FacultySearchPage\", { 'searchList': searchableList, 'title': 'Employee' });\n        searchPage.present();\n        searchPage.onDidDismiss((selected) => {\n            if (selected) {\n\n                this.assignTo = selected.selectedSearch;\n                this.assignToName = selected.selectedSearch.name;\n            }\n        });\n    }\n\n\n    onEditBtn() {\n\n        let actionSheet = this.actionSheetCtrl.create({\n            title: 'Are you sure to change the status ?',\n            buttons: [\n                {\n                    text: 'Yes',\n                    handler: () => {\n                        this.submitFinally();\n                    }\n                }, {\n                    text: 'Cancel',\n                    role: 'destructive',\n                    handler: () => {\n                    }\n                }\n            ]\n        });\n\n        actionSheet.present();\n    }\n\n    submitFinally() {\n\n        let status: any = {\n            assignedTo: this.assignTo && this.assignTo.id,\n            priority: this.priority\n        };\n        (this.inProgress);\n\n        if (this.inProgress) { status.statusId = 3; }\n\n        this.customService.showLoader();\n        this.complaintService.editComplaint(this.complaint.id, status)\n            .subscribe((res: any) => {\n\n                this.complaintService.updateComplaint(this.complaint, res);\n                this.customService.hideLoader();\n                this.customService.showToast('Complaint Edited successfully');\n                this.dismiss(res);\n            }, (err: any) => {\n\n                this.customService.hideLoader();\n                this.customService.showToast(err.msg);\n            });\n\n    }\n\n    dismiss(updatedComplaint?: any) {\n\n        this.viewCtrl.dismiss(updatedComplaint);\n    }\n}\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/management/edit-complaint/edit-complaint.ts"],"sourceRoot":""}