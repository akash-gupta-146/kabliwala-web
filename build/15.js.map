{"version":3,"sources":["../../src/pages/new-c/new-c.module.ts","../../src/pages/new-c/new-c.ts"],"names":[],"mappings":"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","file":"15.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { NewComplaintPage } from './new-c';\n\n@NgModule({\n  declarations: [\n    NewComplaintPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(NewComplaintPage),\n  ],\n})\nexport class NewComplaintPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/new-c/new-c.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { CustomService } from '../../providers/custom.service';\nimport { ComplaintService } from '../../providers/complaint.service';\nimport { SharedService } from '../../providers/shared.service';\n\n/**\n * Generated class for the NewCPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-new-c',\n  templateUrl: 'new-c.html',\n})\nexport class NewComplaintPage { // ALSO USED FOR NEW SUGGESTION\n\n  title: string = `${this.complaintService.compOrSugg}`;\n  complaintCategories: Array<any>;\n  guestInfo: { name: string, email: string, contact: string } = <any>{};;\n\n\n  /**form ngModel variables */\n  selectedCategory: any;\n  selectedSubCategory: any;\n  complaintTitle: string;\n  complaintDescription: string;\n\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    private customService: CustomService,\n    public complaintService: ComplaintService,\n    private sharedService: SharedService\n  ) { }\n\n\n  ionViewDidLoad() {\n    this.getComplaintCategories();\n  }\n\n  getComplaintCategories() {\n    this.customService.showLoader();\n    this.complaintService.getComplaintCategories()\n      .subscribe((res: any) => {\n\n        this.complaintCategories = res;\n        this.customService.hideLoader();\n      }, (err) => {\n\n        this.customService.hideLoader();\n        this.customService.showToast('Could not fetch the required data, Please try again');\n      });\n  }\n\n  resetSubCategories() {\n    this.selectedSubCategory = null;\n  }\n\n  onSubmit() {\n\n    if (this.isGuestNameEntered() && !this.isGuestContactEntered() && !this.isGuestEmailEntered()) {\n      this.customService.showToast('Please also enter your Contact No. or Email', 'top');\n      return;\n    }\n    \n    if (!this.isGuestNameEntered() && (this.isGuestContactEntered() || this.isGuestEmailEntered())) {\n      this.customService.showToast('Please also enter your name', 'top');\n      return;\n    }\n\n    if (!this.sharedService.isValidContactNo(this.guestInfo.contact)) {\n      return;\n    }\n    const data: any = {};\n\n    data.againstCategoryId = this.selectedSubCategory ? this.selectedSubCategory.id : this.selectedCategory.id;\n    data.title = this.complaintTitle;\n    data.description = this.complaintDescription;\n\n    if ((this.isGuestContactEntered() || this.isGuestEmailEntered()) && this.isGuestNameEntered()) {\n\n      data.visitorInfo = {\n        name: this.guestInfo.name\n      };\n      this.isGuestContactEntered() && (data.visitorInfo.contact = this.guestInfo.contact);\n      this.isGuestEmailEntered() && (data.visitorInfo.email = this.guestInfo.email);\n    };\n\n\n    this.customService.showLoader();\n    this.complaintService.submitComplaint(data)\n      .subscribe((res: any) => {\n        this.customService.hideLoader();\n        this.navCtrl.push('SubmitSuccessPage');\n      }, (err) => {\n\n        this.customService.hideLoader();\n        this.customService.showToast(err.msg);\n      });\n  }\n\n\n\n  isGuestNameEntered() {\n    \n    return this.guestInfo.name && this.guestInfo.name.trim() != '';\n  }\n\n  isGuestContactEntered() {\n    return this.guestInfo.contact && this.guestInfo.contact.trim() != '';\n  }\n\n  isGuestEmailEntered() {\n    return this.guestInfo.email && this.guestInfo.email.trim() != '';\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/new-c/new-c.ts"],"sourceRoot":""}